local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_hud")API=b.getInterface('API')cAPI=a.getInterface('cAPI')Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local d=0;local e="Normal"local f=0;local g=""local h=100;local i=100;local j=0;local k=""local l=true;local m=false;local n={}local o={}local p=false;local q=false;local r=0;local s=false;local t=0;local u=0;function calculateTimeDisplay()d=GetClockHours()g=GetClockMonth()f=GetClockMinutes()j=GetClockDayOfMonth()if d<=9 then d="0"..d end;if f<=9 then f="0"..f end;if g==0 then g="Janeiro"elseif g==1 then g="Fevereiro"elseif g==2 then g="MarÃ§o"elseif g==3 then g="Abril"elseif g==4 then g="Maio"elseif g==5 then g="Junho"elseif g==6 then g="Julho"elseif g==7 then g="Agosto"elseif g==8 then g="Setembro"elseif g==9 then g="Outubro"elseif g==10 then g="Novembro"elseif g==11 then g="Dezembro"end end;Citizen.CreateThread(function()while true do local v=500;if l then if IsPauseMenuActive()or IsScreenFadedOut()then SendNUIMessage({active=false,movie=false})else v=200;local w=PlayerPedId()local x=GetEntityHealth(w)-100;local y,z,A=table.unpack(GetEntityCoords(w))local B=GetStreetNameFromHashKey(GetStreetNameAtCoord(y,z,A))calculateTimeDisplay()local C=100-GetPlayerSprintStaminaRemaining(PlayerId())SendNUIMessage({active=l,celular=s,movie=m,vehicle=false,health=x,stamina=C,armour=GetPedArmour(w),hunger=h,thirst=i,day=j,month=g,hour=d,minute=f,street=B,invcapacity=t,invweight=u})end else if h<=20 or i<=20 then l=true;v=200 end end;Citizen.Wait(v)end end)RegisterNetEvent("hoppe:hud:update")AddEventHandler("hoppe:hud:update",function()print(" hud updated! ")t=math.floor(c.getCapacity()*10)/10;u=math.floor(c.getWeight()*10)/10 end)IsCar=function(D)local E=GetVehicleClass(D)return E>=0 and E<=7 or E>=9 and E<=12 or E>=17 and E<=20 end;Fwv=function(F)local G=GetEntityHeading(F)+90.0;if G<0.0 then G=360.0+G end;G=G*0.0174533;return{x=math.cos(G)*2.0,y=math.sin(G)*2.0}end;local H=false;local I=0;Citizen.CreateThread(function()while true do Citizen.Wait(1)local w=PlayerPedId()local J=GetVehiclePedIsIn(w)if J~=0 and(q or IsCar(J))then q=true;if H then DisableControlAction(0,75)end;n[2]=n[1]n[1]=GetEntitySpeed(J)if n[2]~=nil and not H and GetEntitySpeedVector(J,true).y>1.0 and n[1]>10.25 and n[2]-n[1]>n[1]*0.255 then local K=GetEntityCoords(w)local L=Fwv(w)SetEntityHealth(w,GetEntityHealth(w)-150)SetEntityCoords(w,K.x+L.x,K.y+L.y,K.z-0.47,true,true,true)SetEntityVelocity(w,o[2].x,o[2].y,o[2].z)I=20 end;o[2]=o[1]o[1]=GetEntityVelocity(J)if IsControlJustReleased(1,73)then TriggerEvent("cancelando",true)if H then TriggerEvent("vrp_sound:source",'unbelt',0.2)SetTimeout(2000,function()H=false;TriggerEvent("cancelando",false)end)else TriggerEvent("vrp_sound:source",'belt',0.2)SetTimeout(3000,function()H=true;TriggerEvent("cancelando",false)end)end end elseif q then q=false;H=false;n[1],n[2]=0.0,0.0 end end end)Citizen.CreateThread(function()while true do Citizen.Wait(1000)if I>0 then I=I-1 end end end)Citizen.CreateThread(function()while true do Citizen.Wait(1)if I>0 and GetEntityHealth(PlayerPedId())>100 then SetPedToRagdoll(PlayerPedId(),1000,1000,0,0,0,0)end end end)Citizen.CreateThread(function()while true do local w=PlayerPedId()local M=1000;if IsPedInAnyVehicle(w)then if not IsRadarEnabled()then DisplayRadar(true)end else if not IsEntityPlayingAnim(w,"cellphone@","cellphone_text_in",3)then DisplayRadar(false)p=false end end;if IsRadarEnabled()then SetRadarZoom(1000)end;Citizen.Wait(M)end end)RegisterCommand('me',function(N,O,P)local Q='*'..P:sub(4)..'*'local w=PlayerPedId()if GetEntityHealth(w)>101 then TriggerServerEvent('ChatMe',Q)end end)local R=false;RegisterNetEvent('DisplayMe')AddEventHandler('DisplayMe',function(Q,N)local R=true;local S=GetPlayerFromServerId(N)if S==-1 then return end;Citizen.CreateThread(function()while R do local w=PlayerPedId()Wait(1)local T=GetEntityCoords(GetPlayerPed(S),false)local U=GetEntityCoords(w,false)local V=Vdist2(T,U)if V<=30 then DrawText3Ds(T['x'],T['y'],T['z']+0.90,Q)end end end)Wait(7000)R=false end)function DrawText3Ds(y,z,A,Q)local W,X,Y=World3dToScreen2d(y,z,A)SetTextFont(4)SetTextScale(0.35,0.35)SetTextColour(255,255,255,150)SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(Q)DrawText(X,Y)local Z=string.len(Q)/370;DrawRect(X,Y+0.0125,0.01+Z,0.03,0,0,0,80)end