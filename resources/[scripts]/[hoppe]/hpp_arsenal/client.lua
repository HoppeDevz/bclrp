local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_arsenal")API=b.getInterface('API')cAPI=a.getInterface('cAPI')local d=module("hpp_arsenal","config/arsenal")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)function ToogleHppArsenalMenu(e,f)SetNuiFocus(e,e)if e then SendNUIMessage({open=e,data=f})else SendNUIMessage({open=e})end end;local g=0;Citizen.CreateThread(function()while true do if g>0 then g=g-1 end;Citizen.Wait(1000)end end)RegisterNUICallback("giveWeapon",function(h)if g>0 then return end;local i=GetPlayerPed(-1)GiveWeaponToPed(i,h._modelName,parseInt(h._amountAmmo),false,true)TriggerEvent("Notify","importante","Você pegou ["..h._gunName.."] no arsenal!")end)RegisterNUICallback("clearWeapons",function()RemoveAllPedWeapons(GetPlayerPed(-1),true)end)RegisterNUICallback("closeMenu",function()ToogleHppArsenalMenu(false)end)local j=3000;Citizen.CreateThread(function()while true do Citizen.Wait(j)for k,l in pairs(d.arsenal)do local i=GetPlayerPed(-1)local m,n,o=table.unpack(GetEntityCoords(i))local p,q=GetGroundZFor_3dCoord(l._config.coords.x,l._config.coords.y,l._config.coords.z)local r=GetDistanceBetweenCoords(l._config.coords.x,l._config.coords.y,q,m,n,o,true)if r<20 then j=1;DrawMarker(20,l._config.coords.x,l._config.coords.y,l._config.coords.z,0,0,0,0,0,0,0.4,0.4,0.4,0,150,150,50,1,1,1,1)DrawText3D(l._config.coords.x,l._config.coords.y,l._config.coords.z+0.6,l._config.text3d,1.0,4,100)if r<1.5 then if IsControlJustPressed(0,38)then if not exports.hpp_toogle.isToogle()then TriggerEvent("Notify","negado","Você não está em serviço!")else if c.checkPerm(l._config.perm)then ToogleHppArsenalMenu(true,l.gunlist)else TriggerEvent("Notify","negado","Você não tem permissão!")end end end end else j=3000 end end end end)function newNotify(s,t,u,v)if t~=-1 then SetNotificationBackgroundColor(t)end;SetNotificationTextEntry(s)for w,x in ipairs(u)do AddTextComponentSubstringPlayerName(x)end;DrawNotification(false,false)if v then PlaySoundFrontend(-1,"Menu_Accept","Phone_SoundSet_Default",1)end end;function notify(y)newNotify("STRING",11,{""..y},true)end;function DrawText3D(m,n,o,z,A,B,C)local D,E,F=World3dToScreen2d(m,n,o)local G,H,I=table.unpack(GetGameplayCamCoords())local J=GetDistanceBetweenCoords(G,H,I,m,n,o,1)local K=1/J*A;local L=1/GetGameplayCamFov()*100;local K=K*L;if D then SetTextScale(0.0*K,1.1*K)SetTextFont(B)SetTextProportional(1)SetTextColour(255,255,255,C)SetTextDropshadow(0,0,0,0,255)SetTextEdge(2,0,0,0,150)SetTextDropShadow()SetTextOutline()SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(z)DrawText(E,F)end end