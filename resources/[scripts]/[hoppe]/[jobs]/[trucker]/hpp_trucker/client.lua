local a=module("_core","libs/Tunnel")local b=module("_core","libs/Proxy")emP=a.getInterface("hpp_trucker")local c=false;local d=0;local e=""local f=false;local g=nil;local h=1257.29;local i=-3180.40;local j=5.80;local k=0.0;local l=0.0;local m=0.0;local n=nil;Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local o={[1]={['x']=43.06,['y']=2803.80,['z']=57.87},[2]={['x']=243.15,['y']=2602.41,['z']=45.11},[3]={['x']=1059.15,['y']=2660.69,['z']=39.55},[4]={['x']=1990.22,['y']=3763.54,['z']=32.18},[5]={['x']=81.23,['y']=6334.27,['z']=31.22},[6]={['x']=2770.81,['y']=1439.26,['z']=24.51}}local p={[1]={['x']=-2530.05,['y']=2325.91,['z']=33.05},[2]={['x']=-2082.05,['y']=-319.80,['z']=13.05},[3]={['x']=-1413.47,['y']=-279.95,['z']=46.33},[4]={['x']=280.64,['y']=-1259.95,['z']=29.21},[5]={['x']=1208.38,['y']=-1402.58,['z']=35.22},[6]={['x']=1181.46,['y']=-334.74,['z']=69.17},[7]={['x']=2567.72,['y']=362.65,['z']=108.45},[8]={['x']=183.97,['y']=-1554.69,['z']=29.20},[9]={['x']=-331.75,['y']=-1479.03,['z']=30.54},[10]={['x']=2534.50,['y']=2588.13,['z']=37.94},[11]={['x']=2684.40,['y']=3261.81,['z']=55.24},[12]={['x']=-1803.10,['y']=800.33,['z']=138.51}}local q={[1]={['x']=-774.19,['y']=-254.45,['z']=37.10},[2]={['x']=-231.64,['y']=-1170.94,['z']=22.83},[3]={['x']=925.59,['y']=-8.79,['z']=78.76},[4]={['x']=-506.18,['y']=-2191.37,['z']=6.53},[5]={['x']=1209.15,['y']=2712.03,['z']=38.00}}local r={[1]={['x']=-581.20,['y']=5317.28,['z']=70.24},[2]={['x']=2701.74,['y']=3450.62,['z']=55.79},[3]={['x']=1203.52,['y']=-1309.33,['z']=35.22},[4]={['x']=16.99,['y']=-386.11,['z']=39.32}}local s={[1]={['x']=1994.91,['y']=3061.17,['z']=47.04},[2]={['x']=-1397.32,['y']=-581.99,['z']=30.28},[3]={['x']=-552.43,['y']=303.34,['z']=83.21},[4]={['x']=-227.52,['y']=-2051.27,['z']=27.62}}RegisterCommand("pack",function(t,u)local v=PlayerPedId()local w,x,y=table.unpack(GetEntityCoords(v))local z,A=GetGroundZFor_3dCoord(h,i,j)local B=GetDistanceBetweenCoords(h,i,A,w,x,y,true)if B<=50.1 and not f then if u[1]=="diesel"then f=true;e=u[1]g=-1207431159;d=emP.getTruckpoint(e)k=o[d].x;l=o[d].y;m=o[d].z;CriandoBlip(k,l,m)TriggerEvent("Notify","importante","Entrega de <b>Diesel</b> iniciada, pegue o caminhão, a carga e vá até o destino marcado.")elseif u[1]=="gas"then f=true;e=u[1]g=1956216962;d=emP.getTruckpoint(e)k=p[d].x;l=p[d].y;m=p[d].z;CriandoBlip(k,l,m)TriggerEvent("Notify","importante","Entrega de <b>Combustível</b> iniciada, pegue o caminhão, a carga e vá até o destino marcado.")elseif u[1]=="cars"then f=true;e=u[1]g=2091594960;d=emP.getTruckpoint(e)k=q[d].x;l=q[d].y;m=q[d].z;CriandoBlip(k,l,m)TriggerEvent("Notify","importante","Entrega de <b>Veículos</b> iniciada, pegue o caminhão, a carga e vá até o destino marcado.")elseif u[1]=="woods"then f=true;e=u[1]g=2016027501;d=emP.getTruckpoint(e)k=r[d].x;l=r[d].y;m=r[d].z;CriandoBlip(k,l,m)TriggerEvent("Notify","importante","Entrega de <b>Madeiras</b> iniciada, pegue o caminhão, a carga e vá até o destino marcado.")elseif u[1]=="show"then f=true;e=u[1]g=-1770643266;d=emP.getTruckpoint(e)k=s[d].x;l=s[d].y;m=s[d].z;CriandoBlip(k,l,m)TriggerEvent("Notify","importante","Entrega de <b>Shows</b> iniciada, pegue o caminhão, a carga e vá até o destino marcado.")else TriggerEvent("Notify","aviso","<b>Disponíveis:</b> diesel, cars, show, woods e gas")end;vehicle=hpp_spawnCar(g,"CARGA000",1274.2974853516,-3225.990234375,5.9015898704529)if not IsEntityAVehicle(n)then n=hpp_spawnCar(569305213,"ALUGUEL",1273.658203125,-3201.7424316406,5.8973417282104)end end end)local C=3000;Citizen.CreateThread(function()while true do Citizen.Wait(C)if f then C=1;if IsControlJustPressed(0,168)then deleteVehicle(vehicle)RemoveBlip(c)f=false;deleteVehicle(n)end;local v=PlayerPedId()local w,x,y=table.unpack(GetEntityCoords(v))local z,A=GetGroundZFor_3dCoord(k,l,m)local B=GetDistanceBetweenCoords(k,l,A,w,x,y,true)if B<=100.0 then DrawMarker(23,k,l,m-0.96,0,0,0,0,0,0,10.0,10.0,1.0,0,95,140,50,0,0,0,0)if B<=5.9 then if IsControlJustPressed(0,38)then local vehicle=getVehicleInDirection(GetEntityCoords(PlayerPedId()),GetOffsetFromEntityInWorldCoords(PlayerPedId(),0.0,5.0,0.0))if GetEntityModel(vehicle)==g then local D=emP.checkPayment(d,e,parseInt(GetVehicleBodyHealth(GetPlayersLastVehicle())))TriggerEvent("Notify","sucesso","Você ganhou R$"..D)deleteVehicle(vehicle)RemoveBlip(c)f=false end end end end else C=3000 end end end)Citizen.CreateThread(function()local E=AddBlipForCoord(1257.201171875,-3173.8098144531,5.7997231483459)SetBlipSprite(E,477)SetBlipColour(E,4)SetBlipScale(E,0.5)SetBlipAsShortRange(E,false)SetBlipRoute(E,false)BeginTextCommandSetBlipName("STRING")AddTextComponentString("Central | Caminhoneiro")EndTextCommandSetBlipName(E)end)function getVehicleInDirection(F,G)local H=CastRayPointToPoint(F.x,F.y,F.z,G.x,G.y,G.z,10,PlayerPedId(),false)local I,J,K,L,vehicle=GetRaycastResult(H)return vehicle end;function hpp_spawnCar(vehicle,M,w,x,y,N,O)local P=vehicle;while not HasModelLoaded(P)do RequestModel(P)Citizen.Wait(1)end;if HasModelLoaded(P)then local Q=CreateVehicle(P,w,x,y+0.5,N,true,false)local R=VehToNet(Q)local S=NetworkGetNetworkIdFromEntity(Q)NetworkRegisterEntityAsNetworked(Q)while not NetworkGetEntityIsNetworked(Q)do NetworkRegisterEntityAsNetworked(Q)Citizen.Wait(1)end;if NetworkDoesNetworkIdExist(R)then SetEntitySomething(Q,true)if NetworkGetEntityIsNetworked(Q)then SetNetworkIdExistsOnAllMachines(R,true)end end;if O then setVehMods(O,NetToVeh(R))end;SetNetworkIdCanMigrate(S,true)SetVehicleNumberPlateText(NetToVeh(R),M)Citizen.InvokeNative(0xAD738C3085FE7E11,NetToVeh(R),true,true)SetVehicleHasBeenOwnedByPlayer(NetToVeh(R),true)SetVehicleNeedsToBeHotwired(NetToVeh(R),false)SetModelAsNoLongerNeeded(P)SetVehRadioStation(NetToVeh(R),"OFF")currentCar=Q;return Q end end;function deleteVehicle(vehicle)SetVehicleHasBeenOwnedByPlayer(vehicle,false)Citizen.InvokeNative(0xAD738C3085FE7E11,vehicle,true,true)SetVehicleAsNoLongerNeeded(Citizen.PointerValueIntInitialized(vehicle))DeleteVehicle(vehicle)end;function CriandoBlip(w,x,y)c=AddBlipForCoord(w,x,y)SetBlipSprite(c,1)SetBlipColour(c,5)SetBlipScale(c,0.4)SetBlipAsShortRange(c,false)SetBlipRoute(c,true)BeginTextCommandSetBlipName("STRING")AddTextComponentString("Entrega de Carga")EndTextCommandSetBlipName(c)end