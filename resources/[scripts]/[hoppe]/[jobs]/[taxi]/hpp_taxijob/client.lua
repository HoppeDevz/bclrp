local a=module("_core","libs/Tunnel")local b=module("_core","libs/Proxy")emP=a.getInterface("emp_taxista")local c=nil;local d=0;local e=false;local f=896.48;local g=-177.45;local h=74.70;local i=nil;local j=nil;local k=true;local l=0;local m=10;local n={[1]={['x']=151.30,['y']=-1028.63,['z']=28.84,['xp']=152.45,['yp']=-1041.24,['zp']=29.37,['h']=252.0},[2]={['x']=423.84,['y']=-959.30,['z']=28.81,['xp']=437.37,['yp']=-979.03,['zp']=30.68,['h']=271.0},[3]={['x']=1.03,['y']=-1510.86,['z']=29.40,['xp']=20.67,['yp']=-1505.62,['zp']=31.85,['h']=319.0},[4]={['x']=-188.07,['y']=-1612.28,['z']=33.39,['xp']=-189.55,['yp']=-1585.80,['zp']=34.76,['h']=178.0},[5]={['x']=98.88,['y']=-1927.16,['z']=20.25,['xp']=101.02,['yp']=-1912.35,['zp']=21.40,['h']=70.0},[6]={['x']=320.98,['y']=-2022.02,['z']=20.40,['xp']=335.73,['yp']=-2010.77,['zp']=22.31,['h']=321.0},[7]={['x']=755.53,['y']=-2486.26,['z']=19.54,['xp']=774.34,['yp']=-2475.07,['zp']=20.14,['h']=356.0},[8]={['x']=1057.66,['y']=-2124.80,['z']=32.20,['xp']=1040.09,['yp']=-2115.65,['zp']=32.84,['h']=175.0},[9]={['x']=1377.08,['y']=-1530.01,['z']=56.07,['xp']=1379.33,['yp']=-1514.99,['zp']=58.43,['h']=119.0},[10]={['x']=1260.24,['y']=-588.15,['z']=68.53,['xp']=1240.60,['yp']=-601.63,['zp']=69.78,['h']=193.0},[11]={['x']=899.58,['y']=-590.58,['z']=56.85,['xp']=886.76,['yp']=-608.20,['zp']=58.44,['h']=238.0},[12]={['x']=945.18,['y']=-140.04,['z']=74.07,['xp']=959.34,['yp']=-121.23,['zp']=74.96,['h']=60.0},[13]={['x']=84.44,['y']=476.19,['z']=146.91,['xp']=80.10,['yp']=486.12,['zp']=148.20,['h']=118.0},[14]={['x']=-720.03,['y']=482.23,['z']=107.10,['xp']=-721.10,['yp']=489.75,['zp']=109.38,['h']=110.0},[15]={['x']=-1244.39,['y']=497.98,['z']=93.86,['xp']=-1229.15,['yp']=515.72,['zp']=95.42,['h']=359.0},[16]={['x']=-1514.99,['y']=442.97,['z']=109.70,['xp']=-1495.97,['yp']=437.10,['zp']=112.49,['h']=296.0},[17]={['x']=-1684.14,['y']=-308.47,['z']=51.41,['xp']=-1684.87,['yp']=-291.66,['zp']=51.89,['h']=234.0},[18]={['x']=-1413.14,['y']=-531.91,['z']=30.98,['xp']=-1447.29,['yp']=-537.71,['zp']=34.74,['h']=215.0},[19]={['x']=-1036.80,['y']=-492.27,['z']=36.15,['xp']=-1007.32,['yp']=-486.80,['zp']=39.97,['h']=27.0},[20]={['x']=-551.46,['y']=-648.64,['z']=32.73,['xp']=-533.39,['yp']=-622.87,['zp']=34.67,['h']=92.0},[21]={['x']=-616.30,['y']=-920.80,['z']=22.98,['xp']=-598.49,['yp']=-929.96,['zp']=23.86,['h']=291.0},[22]={['x']=-752.13,['y']=-1041.29,['z']=12.25,['xp']=-759.21,['yp']=-1047.16,['zp']=13.50,['h']=117.0},[23]={['x']=-1155.20,['y']=-1413.48,['z']=4.46,['xp']=-1150.56,['yp']=-1426.38,['zp']=4.95,['h']=247.0},[24]={['x']=-997.88,['y']=-1599.65,['z']=4.59,['xp']=-989.04,['yp']=-1575.82,['zp']=5.17,['h']=271.0},[25]={['x']=-829.38,['y']=-1218.09,['z']=6.54,['xp']=-822.50,['yp']=-1223.35,['zp']=7.36,['h']=319.0},[26]={['x']=-334.47,['y']=-1418.13,['z']=29.71,['xp']=-320.10,['yp']=-1389.73,['zp']=36.50,['h']=91.0},[27]={['x']=135.28,['y']=-1306.46,['z']=28.65,['xp']=132.91,['yp']=-1293.90,['zp']=29.26,['h']=119.0},[28]={['x']=-34.00,['y']=-1079.86,['z']=26.26,['xp']=-39.02,['yp']=-1082.46,['zp']=26.42,['h']=69.0}}local o={[1]={['model']="ig_abigail",['hash']=0x400AEC41},[2]={['model']="a_m_o_acult_02",['hash']=0x4BA14CCA},[3]={['model']="a_m_m_afriamer_01",['hash']=0xD172497E},[4]={['model']="ig_mp_agent14",['hash']=0xFBF98469},[5]={['model']="u_m_m_aldinapoli",['hash']=0xF0EC56E2},[6]={['model']="ig_amandatownley",['hash']=0x6D1E15F7},[7]={['model']="ig_andreas",['hash']=0x47E4EEA0},[8]={['model']="csb_anita",['hash']=0x0703F106},[9]={['model']="u_m_y_antonb",['hash']=0xCF623A2C},[10]={['model']="g_m_y_armgoon_02",['hash']=0xC54E878A},[11]={['model']="ig_ashley",['hash']=0x7EF440DB},[12]={['model']="s_m_m_autoshop_01",['hash']=0x040EABE3},[13]={['model']="g_m_y_ballaeast_01",['hash']=0xF42EE883},[14]={['model']="g_m_y_ballaorig_01",['hash']=0x231AF63F},[15]={['model']="s_m_y_barman_01",['hash']=0xE5A11106},[16]={['model']="u_m_y_baygor",['hash']=0x5244247D},[17]={['model']="a_m_o_beach_01",['hash']=0x8427D398},[18]={['model']="a_m_y_beachvesp_01",['hash']=0x7E0961B8},[19]={['model']="ig_bestmen",['hash']=0x5746CD96},[20]={['model']="a_f_y_bevhills_01",['hash']=0x445AC854}}local p=3000;Citizen.CreateThread(function()while true do Citizen.Wait(p)if not e then local q=PlayerPedId()local r,s,t=table.unpack(GetEntityCoords(q))local u,v=GetGroundZFor_3dCoord(f,g,h)local w=GetDistanceBetweenCoords(f,g,v,r,s,t,true)if w<=20.0 then p=1;DrawMarker(23,f,g,h-0.97,0,0,0,0,0,0,1.0,1.0,0.5,240,200,80,20,0,0,0,0)if w<=1.2 then drawTxt("PRESSIONE  ~b~E~w~  PARA INICIAR EXPEDIENTE",4,0.5,0.93,0.50,255,255,255,180)if IsControlJustPressed(0,38)and emP.checkPermission()then e=true;d=math.random(#n)CriandoBlip(n,d)end end else p=3000 end end end end)Citizen.CreateThread(function()while true do Citizen.Wait(1)if e then local q=PlayerPedId()local x=GetVehiclePedIsUsing(q)local y=GetEntitySpeed(x)*2.236936;local r,s,t=table.unpack(GetEntityCoords(q))local u,v=GetGroundZFor_3dCoord(n[d].x,n[d].y,n[d].z)local w=GetDistanceBetweenCoords(n[d].x,n[d].y,v,r,s,t,true)if w<=50.0 and GetVehicleMaxNumberOfPassengers(x)>=3 then DrawMarker(21,n[d].x,n[d].y,n[d].z+0.20,0,0,0,0,180.0,130.0,2.0,2.0,1.0,240,200,80,20,1,0,0,1)if w<=2.5 then if IsControlJustPressed(0,38)and emP.checkPermission()then RemoveBlip(c)FreezeEntityPosition(x,true)if DoesEntityExist(i)then local m=emP.checkPayment(m)TriggerEvent("Notify","sucesso","VocÃª ganhou R$"..m)Citizen.Wait(3000)TaskLeaveVehicle(i,x,262144)TaskWanderStandard(i,10.0,10)Citizen.Wait(1100)SetVehicleDoorShut(x,3,0)Citizen.Wait(1000)end;if k then local z=math.random(#o)modelRequest(o[z].model)i=CreatePed(4,o[z].hash,n[d].xp,n[d].yp,n[d].zp,3374176,true,false)SetEntityInvincible(i,true)TaskEnterVehicle(i,x,-1,2,1.0,1,0)k=false;m=10;j=i else i=nil;k=true;FreezeEntityPosition(x,false)end;lselecionado=d;while true do if lselecionado==d then d=math.random(#n)else break end;Citizen.Wait(1)end;CriandoBlip(n,d)if DoesEntityExist(i)then while true do Citizen.Wait(1)local A,B,C=table.unpack(GetEntityCoords(i))if not IsPedSittingInVehicle(i,x)then DrawMarker(21,A,B,C+1.3,0,0,0,0,180.0,130.0,0.6,0.8,0.5,240,200,80,50,1,0,0,1)end;if IsPedSittingInVehicle(i,x)then FreezeEntityPosition(x,false)break end end end end end end;if IsEntityAVehicle(x)and DoesEntityExist(i)then if math.ceil(y)>=81 and l<=0 and m>0 then l=5;m=m-1 end end end end end)Citizen.CreateThread(function()while true do Citizen.Wait(1000)if e then if l>0 then l=l-1 end end end end)function removePeds()SetTimeout(20000,function()if e and j and i==nil then TriggerServerEvent("trydeleteped",PedToNet(j))end end)end;Citizen.CreateThread(function()while true do Citizen.Wait(1)if e then local x=GetVehiclePedIsIn(PlayerPedId())if IsControlJustPressed(0,168)then if x~=nil and x~=0 then RemoveBlip(c)if DoesEntityExist(i)then TaskLeaveVehicle(i,x,262144)TaskWanderStandard(i,10.0,10)Citizen.Wait(1100)SetVehicleDoorShut(x,3,0)FreezeEntityPosition(x,false)end;c=nil;d=0;i=nil;k=true;e=false else TriggerEvent("Notify","negado","Entre no carro para cancelar!")end end end end end)RegisterNetEvent("syncdeleteped")AddEventHandler("syncdeleteped",function(D)if NetworkDoesNetworkIdExist(D)then local E=NetToPed(D)if DoesEntityExist(E)then Citizen.InvokeNative(0xAD738C3085FE7E11,E,true,true)SetPedAsNoLongerNeeded(Citizen.PointerValueIntInitialized(E))DeletePed(E)end end end)Citizen.CreateThread(function()local F=AddBlipForCoord(911.39221191406,-173.30697631836,75.376098632813)SetBlipSprite(F,198)SetBlipColour(F,4)SetBlipScale(F,0.5)SetBlipAsShortRange(F,false)SetBlipRoute(F,false)BeginTextCommandSetBlipName("STRING")AddTextComponentString("Central | Taxista")EndTextCommandSetBlipName(F)end)function drawTxt(G,H,r,s,I,J,K,L,M)SetTextFont(H)SetTextScale(I,I)SetTextColour(J,K,L,M)SetTextOutline()SetTextCentre(1)SetTextEntry("STRING")AddTextComponentString(G)DrawText(r,s)end;function modelRequest(N)RequestModel(GetHashKey(N))while not HasModelLoaded(GetHashKey(N))do Citizen.Wait(10)end end;function CriandoBlip(n,d)c=AddBlipForCoord(n[d].x,n[d].y,n[d].z)SetBlipSprite(c,1)SetBlipColour(c,5)SetBlipScale(c,0.4)SetBlipAsShortRange(c,false)SetBlipRoute(c,true)BeginTextCommandSetBlipName("STRING")AddTextComponentString("Corrida de Taxista")EndTextCommandSetBlipName(c)end