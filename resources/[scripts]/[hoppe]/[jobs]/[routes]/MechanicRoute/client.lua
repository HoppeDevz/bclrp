local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("MechanicRoute")hppC={}a.bindInterface("MechanicRoute",hppC)API=b.getInterface('API')cAPI=a.getInterface('cAPI')animApi=module("_core","client/functions/_Anims")local d;Citizen.CreateThread(function()d=c.getCfg()end)local e=false;local f=0;local g;local h=3000;Citizen.CreateThread(function()while true do if d then local i=GetPlayerPed(-1)local j,k,l=table.unpack(GetEntityCoords(i))local m,n,o=table.unpack(d._startRoute)local p=GetDistanceBetweenCoords(j,k,l,m,n,o,true)if p<20 and not e then h=1;DrawMarker(20,m,n,o,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(m,n,o+0.6,"INICIAR ROTA",1.0,4,100)if p<2 then if IsControlJustPressed(0,38)then if not IsPedInAnyVehicle(i)then f=1;e=true;addblip()end end end else h=3000 end end;Citizen.Wait(h)end end)local q=3000;Citizen.CreateThread(function()while true do if d then if e then local i=GetPlayerPed(-1)local j,k,l=table.unpack(GetEntityCoords(i))local m,n,o=d._routes[f][1],d._routes[f][2],d._routes[f][3]local p=GetDistanceBetweenCoords(j,k,l,m,n,o,true)if p<20 then q=1;DrawMarker(20,m,n,o,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(m,n,o+0.6,"PEGAR MOTOR/PNEU",1.0,4,100)if p<2 then if IsControlJustPressed(0,38)then if IsPedInAnyVehicle(i)or GetEntitySpeed(i)>20 then else c.giveItem()removeblip()if f<12 then f=f+1;addblip()else f=1;addblip()end end end end else q=3000 end else q=3000 end end;Citizen.Wait(q)end end)local r=3000;Citizen.CreateThread(function()while true do if e then r=1;if IsControlJustPressed(0,168)then removeblip()g=nil;f=0;e=not e end else r=3000 end;Citizen.Wait(r)end end)function DrawText3D(s,t,u,v,w,x,y)local z,A,B=World3dToScreen2d(s,t,u)local C,D,E=table.unpack(GetGameplayCamCoords())local F=GetDistanceBetweenCoords(C,D,E,s,t,u,1)local G=1/F*w;local H=1/GetGameplayCamFov()*100;local G=G*H;if z then SetTextScale(0.0*G,1.1*G)SetTextFont(x)SetTextProportional(1)SetTextColour(255,255,255,y)SetTextDropshadow(0,0,0,0,255)SetTextEdge(2,0,0,0,150)SetTextDropShadow()SetTextOutline()SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(v)DrawText(A,B)end end;function addblip()g=AddBlipForCoord(d._routes[f][1],d._routes[f][2],d._routes[f][3])SetBlipAsShortRange(g,true)SetBlipColour(g,28)SetBlipScale(g,0.7)SetBlipRoute(g,true)SetBlipRouteColour(g,28)BeginTextCommandSetBlipName("STRING")AddTextComponentString("COLETAR | FERRO")EndTextCommandSetBlipName(g)end;function removeblip()RemoveBlip(g)g=nil end