local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("GunPowderRouteBeach")hppC={}a.bindInterface("GunPowderRouteBeach",hppC)API=b.getInterface('API')cAPI=a.getInterface('cAPI')animApi=module("_core","client/functions/_Anims")local d;Citizen.CreateThread(function()d=c.getCfg()end)local e=false;local f=0;local g;local h=3000;Citizen.CreateThread(function()while true do if d then for i=1,#d._startRoute do local j=GetPlayerPed(-1)local k,l,m=table.unpack(GetEntityCoords(j))local n,o,p=table.unpack(d._startRoute[i])local q=GetDistanceBetweenCoords(k,l,m,n,o,p,true)if q<20 and not e then h=1;DrawMarker(20,n,o,p,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(n,o,p+0.6,"INICIAR ROTA DA POLVORA",1.0,4,100)if q<2 then if IsControlJustPressed(0,38)then f=1;e=true;addblip()end end else h=3000 end end end;Citizen.Wait(h)end end)local r=3000;Citizen.CreateThread(function()while true do if d then if e then local j=GetPlayerPed(-1)local k,l,m=table.unpack(GetEntityCoords(j))local n,o,p=d._routes[f][1],d._routes[f][2],d._routes[f][3]local q=GetDistanceBetweenCoords(k,l,m,n,o,p,true)if q<20 then r=1;DrawMarker(20,n,o,p,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(n,o,p+0.6,"COLETAR POLVORA",1.0,4,100)if q<2 then if IsControlJustPressed(0,38)then if not IsPedInAnyVehicle(j)then if not c.giveItem("gunpowder",8)then return TriggerEvent("Notify","negado","EspaÃ§o insuficiente")else TriggerEvent("cancelando",true)animApi.CarregarObjeto("amb@world_human_const_drill@male@drill@base","base","prop_tool_jackham",49,28422)Citizen.Wait(10000)animApi.DeletarObjeto()TriggerEvent("Notify","sucesso","Pegou x8 polvoras")TriggerEvent("cancelando",false)removeblip()if f<12 then f=f+1;addblip()else f=1;addblip()end end end end end else r=3000 end else r=3000 end end;Citizen.Wait(r)end end)local s=3000;Citizen.CreateThread(function()while true do if e then s=1;if IsControlJustPressed(0,168)then removeblip()g=nil;f=0;e=not e end else s=3000 end;Citizen.Wait(s)end end)function DrawText3D(t,u,v,w,x,y,z)local A,B,C=World3dToScreen2d(t,u,v)local D,E,F=table.unpack(GetGameplayCamCoords())local G=GetDistanceBetweenCoords(D,E,F,t,u,v,1)local H=1/G*x;local I=1/GetGameplayCamFov()*100;local H=H*I;if A then SetTextScale(0.0*H,1.1*H)SetTextFont(y)SetTextProportional(1)SetTextColour(255,255,255,z)SetTextDropshadow(0,0,0,0,255)SetTextEdge(2,0,0,0,150)SetTextDropShadow()SetTextOutline()SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(w)DrawText(B,C)end end;function addblip()g=AddBlipForCoord(d._routes[f][1],d._routes[f][2],d._routes[f][3])SetBlipSprite(g,478)SetBlipAsShortRange(g,true)SetBlipColour(g,28)SetBlipScale(g,0.7)SetBlipRoute(g,true)SetBlipRouteColour(g,28)BeginTextCommandSetBlipName("STRING")AddTextComponentString("COLETAR | FERRO")EndTextCommandSetBlipName(g)end;function removeblip()RemoveBlip(g)g=nil end