local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_mechanic")hppC={}a.bindInterface("hpp_mechanic",hppC)API=b.getInterface('API')cAPI=a.getInterface('cAPI')animApi=module("_core","client/functions/_Anims")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)RegisterCommand("rmotor",function()if c.checkPerm("mechPerm")then local d=getNearestVehicle(8)local e=GetVehicleNumberPlateText(d)if GetEntityHealth(d)<10 then return TriggerEvent("Notify","negado","Este veículo está danificado!")end;if c.checkWeight("vehengine")then return TriggerEvent("Notify","negado","Espaço insuficiente!")end;local f=string.find(e,"RP")if f==nil then local g=GetVehicleDoorAngleRatio(d,4)if g==0 then TriggerEvent("Notify","negado","Você precisa abrir o capô para roubar o motor!")else TriggerEvent('cancelando',true)animApi.playAnim(false,{{"mini@repair","fixing_a_ped"}},true)Citizen.Wait(12000)SetVehicleEngineHealth(d,-4000)SetEntityHealth(d,0)SetEntityHealth(d,0.0)animApi.stopAnim(false)TriggerEvent('cancelando',false)c.giveItem('vehengine',1)end else TriggerEvent("Notify","negado","Você não pode roubar este veículo!")end else TriggerEvent("Notify","negado","Você não é um mecânico!")end end)RegisterCommand("rpneu",function(h,i,j)local d=getNearestVehicle(7)if c.checkPerm("mechPerm")then local e=GetVehicleNumberPlateText(d)local f=string.find(e,"RP")if c.checkWeight("vehtyres")then return TriggerEvent("Notify","negado","Espaço insuficiente!")end;if f~=nil then return TriggerEvent("Notify","negado","Você não pode roubar este veículo!")end;if i[1]=="ef"then if not IsVehicleTyreBurst(d,0,true)then TriggerEvent('cancelando',true)animApi.playAnim(true,{{"amb@medic@standing@tendtodead@idle_a","idle_a"}},true)Citizen.Wait(6000)animApi.stopAnim(false)SetVehicleTyreBurst(d,0,true,1000.00)TriggerEvent("Notify","importante","Pneu [ESQUERDO FRONTAL] removido!")TriggerEvent('cancelando',false)c.giveItem('vehtyres',1)else TriggerEvent("Notify","negado","Este pneu já foi removido!")end elseif i[1]=="df"then if not IsVehicleTyreBurst(d,1,true)then TriggerEvent('cancelando',true)animApi.playAnim(true,{{"amb@medic@standing@tendtodead@idle_a","idle_a"}},true)Citizen.Wait(6000)animApi.stopAnim(false)SetVehicleTyreBurst(d,1,true,1000.00)TriggerEvent("Notify","importante","Pneu [DIREITO FRONTAL] removido!")c.giveItem('vehtyres',1)TriggerEvent('cancelando',false)else TriggerEvent("Notify","negado","Este pneu já foi removido!")end elseif i[1]=="et"then if not IsVehicleTyreBurst(d,4,true)then TriggerEvent('cancelando',true)animApi.playAnim(true,{{"amb@medic@standing@tendtodead@idle_a","idle_a"}},true)Citizen.Wait(6000)animApi.stopAnim(false)SetVehicleTyreBurst(d,4,true,1000.00)TriggerEvent("Notify","importante","Pneu [ESQUERDO TRASEIRO] removido!")c.giveItem('vehtyres',1)TriggerEvent('cancelando',false)else TriggerEvent("Notify","negado","Este pneu já foi removido!")end elseif i[1]=="dt"then if not IsVehicleTyreBurst(d,5,true)then TriggerEvent('cancelando',true)animApi.playAnim(true,{{"amb@medic@standing@tendtodead@idle_a","idle_a"}},true)Citizen.Wait(6000)animApi.stopAnim(false)SetVehicleTyreBurst(d,5,true,1000.00)TriggerEvent("Notify","importante","Pneu [DIREITO TRASEIRO] removido!")c.giveItem('vehtyres',1)TriggerEvent('cancelando',false)else TriggerEvent("Notify","negado","Este pneu já foi removido!")end end else TriggerEvent("Notify","negado","Você não é um mecânico!")end end)