local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')func=a.getInterface("hpp_rouboarmas")ammu_client={}a.bindInterface("hpp_rouboarmas",ammu_client)local c=false;local d=0;local e=module("_core","client/functions/_Anims")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local f={{['id']=1,['x']=253.92,['y']=-51.98,['z']=69.95},{['id']=2,['x']=-1304.31,['y']=-396.54,['z']=36.7},{['id']=3,['x']=-660.64,['y']=-933.08,['z']=21.83},{['id']=4,['x']=24.61,['y']=-1105.61,['z']=29.8},{['id']=5,['x']=840.5,['y']=-1035.58,['z']=28.2}}local g=3000;local h=false;Citizen.CreateThread(function()while true do Citizen.Wait(g)local i=PlayerPedId()local j,k,l=GetEntityCoords(i)if GetSelectedPedWeapon(i)==GetHashKey("WEAPON_UNARMED")and not IsPedInAnyVehicle(i)then for m,n in pairs(f)do if m==1 then h=false end;if Vdist(n.x,n.y,n.z,j,k,l)<=1.5 and not c then h=true;DrawMarker(21,n.x,n.y,n.z-0.3,0,0,0,0,180.0,130.0,0.6,0.8,0.5,255,0,0,50,1,0,0,1)if IsControlJustPressed(0,38)then if func.checkPermission()then if exports.hpp_toogle.GetCopsToogled()>4 then func.checkRobbery(n.id,n.x,n.y,n.z)else TriggerEvent("Notify","aviso","Número insuficiente de policiais!")end else TriggerEvent("Notify","negado","Você não pode roubar aqui.")end end end end;if h then g=1 else g=3000 end end end end)RegisterNetEvent("iniciandolojadearmas")AddEventHandler("iniciandolojadearmas",function(j,k,l)d=50;c=true;SetEntityHeading(PlayerPedId())SetEntityCoords(PlayerPedId(),j,k,l-1,false,false,false,false)TriggerEvent('cancelando',true)e.playAnim(false,{{"oddjobs@shop_robbery@rob_till","loop"}},true)end)Citizen.CreateThread(function()while true do Citizen.Wait(1000)if c then d=d-1;if d<=0 then c=false;ClearPedTasks(PlayerPedId())TriggerEvent('cancelando',false)end end end end)Citizen.CreateThread(function()TriggerEvent('cancelando',false)end)function ammu_client.playAnim(o,p,q,r)e.playAnim(o,{{p,q}},r)end;function ammu_client.stopAnim(o)e.stopAnim(o)end;local s={}function ammu_client.addBlip(j,k,l)local t=AddBlipForCoord(j,k,l)table.insert(s,1,{j,k,l,t})SetBlipSprite(t,150)SetBlipRoute(t,true)SetBlipRouteColour(t,1)SetBlipColour(t,1)SetBlipScale(t,0.7)SetBlipAsShortRange(t,false)BeginTextCommandSetBlipName("STRING")AddTextComponentString("Roubo | Ammu Nation")EndTextCommandSetBlipName(t)end;function ammu_client.removeBlip(j,k,l)for u=1,#s do if s[u][1]==j then removeBlip(s[u][4])table.remove(s,u)end end end;RegisterNetEvent("hpp:get:cops:number")AddEventHandler("hpp:get:cops:number",function()TriggerServerEvent("hpp:get:cops:number")end)