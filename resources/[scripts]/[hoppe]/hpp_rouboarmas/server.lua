local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=module('_core','libs/Tools')APICKF=b.getInterface('API')cAPI=a.getInterface('cAPI')ammu_client=a.getInterface("hpp_rouboarmas")func={}a.bindInterface("hpp_rouboarmas",func)Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local d=c.newIDGenerator()local e={}local f="https://discordapp.com/api/webhooks/716029778129322116/xEF2lyQf61iCnMWM3LnZq3k-HH50P5LiOIeJ5ZAia3xfKgN3JP_JhkfbzHCYV7hih09S"function SendWebhookMessage(g,h)if g~=nil and g~=""then PerformHttpRequest(g,function(i,j,k)end,'POST',json.encode({content=h}),{['Content-Type']='application/json'})end end;local l={[1]={['index']="wbody|WEAPON_ASSAULTSMG",['qtd']=1,['name']="MTAR-21"},[2]={['index']="wbody|WEAPON_ASSAULTRIFLE",['qtd']=1,['name']="AK-103"},[3]={['index']="wbody|WEAPON_GUSENBERG",['qtd']=1,['name']="THOMPSON"},[4]={['index']="wbody|WEAPON_PISTOL_MK2",['qtd']=1,['name']="FN FIVE SEVEN"},[5]={['index']="wbody|WEAPON_COMPACTRIFLE",['qtd']=1,['name']="AKS-74U"},[6]={['index']="wbody|WEAPON_CARBINERIFLE_MK2",['qtd']=1,['name']="MPX"},[7]={['index']="wbody|WEAPON_MACHINEPISTOL",['qtd']=1,['name']="TEC-9"},[8]={['index']="wammo|WEAPON_ASSAULTSMG",['qtd']=35,['name']="MUNIÇÃO DE MTAR-2"},[9]={['index']="wammo|WEAPON_ASSAULTRIFLE",['qtd']=50,['name']="MUNIÇÃO DE AK-103"},[10]={['index']="wammo|WEAPON_GUSENBERG",['qtd']=10,['name']="MUNIÇÃO DE THOMPSON"},[11]={['index']="wammo|WEAPON_PISTOL_MK2",['qtd']=50,['name']="MUNIÇÃO DE FN FIVE SEVEN"},[12]={['index']="wammo|WEAPON_COMPACTRIFLE",['qtd']=30,['name']="MUNIÇÃO DE AKS-74U"},[13]={['index']="wammo|WEAPON_CARBINERIFLE_MK2",['qtd']=50,['name']="MUNIÇÃO DE MPX"},[14]={['index']="wammo|WEAPON_MACHINEPISTOL",['qtd']=20,['name']="MUNIÇÃO DE TEC-9"},[15]={['index']="wammo|WEAPON_PUMPSHOTGUN",['qtd']=50,['name']="MUNIÇÃO DE SHOTGUN"},[16]={['index']="dinheirosujo",['qtd']=3500,['name']="Dinheiro Sujo"},[17]={['index']="dinheirosujo",['qtd']=1500,['name']="Dinheiro Sujo"},[18]={['index']="dinheirosujo",['qtd']=500,['name']="Dinheiro Sujo"},[19]={['index']="dinheirosujo",['qtd']=2500,['name']="Dinheiro Sujo"},[20]={['index']="dinheirosujo",['qtd']=1500,['name']="Dinheiro Sujo"},[21]={['index']="dinheirosujo",['qtd']=3100,['name']="Dinheiro Sujo"},[22]={['index']="dinheirosujo",['qtd']=3000,['name']="Dinheiro Sujo"},[23]={['index']="dinheirosujo",['qtd']=3000,['name']="Dinheiro Sujo"},[24]={['index']="dinheirosujo",['qtd']=4100,['name']="Dinheiro Sujo"},[25]={['index']="dinheirosujo",['qtd']=3600,['name']="Dinheiro Sujo"},[26]={['index']="dinheirosujo",['qtd']=2400,['name']="Dinheiro Sujo"},[27]={['index']="dinheirosujo",['qtd']=3600,['name']="Dinheiro Sujo"},[28]={['index']="dinheirosujo",['qtd']=3100,['name']="Dinheiro Sujo"},[29]={['index']="dinheirosujo",['qtd']=4100,['name']="Dinheiro Sujo"},[30]={['index']="dinheirosujo",['qtd']=3200,['name']="Dinheiro Sujo"},[31]={['index']="dinheirosujo",['qtd']=5500,['name']="Dinheiro Sujo"},[32]={['index']="dinheirosujo",['qtd']=1300,['name']="Dinheiro Sujo"},[33]={['index']="dinheirosujo",['qtd']=1500,['name']="Dinheiro Sujo"},[34]={['index']="dinheirosujo",['qtd']=3200,['name']="Dinheiro Sujo"},[35]={['index']="dinheirosujo",['qtd']=2100,['name']="Dinheiro Sujo"},[36]={['index']="dinheirosujo",['qtd']=900,['name']="Dinheiro Sujo"},[37]={['index']="dinheirosujo",['qtd']=300,['name']="Dinheiro Sujo"}}local m={}Citizen.CreateThread(function()while true do Citizen.Wait(1000)for n,o in pairs(m)do if o>0 then m[n]=o-1 end end end end)function func.checkRobbery(p,q,r,s)local source=source;local t=func.getCopsNumber()Citizen.Wait(1100)local u=APICKF.getUserFromSource(source)if u then local v=u:getCharacter()if v then local w=v.id;local x=w;local y=v.charName;if x then print('policia',t)if#t>=1 then if m[p]==0 or not m[p]then m[p]=1500;TriggerClientEvent('iniciandolojadearmas',source,q,r,s)local z=math.random(100)if z>=10 then TriggerClientEvent("Notify",source,"aviso","A policia foi acionada.",8000)TriggerClientEvent("vrp_sound:source",source,'alarm',0.04)for A,B in pairs(t)do local C=parseInt(B)if C then async(function()local D=d:gen()e[D]=ammu_client.addBlip(C,q,r,s)TriggerClientEvent('chatMessage',C,"190",{64,64,255},"O roubo começou na ^1Loja de armas^0, dirija-se até o local e intercepte o assaltante.")SetTimeout(20000,function()ammu_client.removeBlip(C,q,r,s)d:free(D)end)end)end end end;SetTimeout(10000,function()local E=math.random(35000,40000)v:addItem("generic_blackmoney",E)TriggerClientEvent("Notify",source,"aviso","Você roubou R$"..E.."")end)else TriggerClientEvent("Notify",source,"aviso","O seguro ainda não cobriu o ultomo assalto, aguarde <b>"..m[p].." segundos</b>até a cobertura.",8000)end else TriggerClientEvent("Notify",source,"aviso","Número insuficiente de policiais no momento.",8000)end end end end end;function func.checkPermission()local source=source;local u=APICKF.getUserFromSource(source)if u then local v=u:getCharacter()if v then local w=v.id;return not v:hasGroup("pmesp")end end end;local F={}function func.getCopsNumber()F={}TriggerClientEvent("hpp:get:cops:number",-1)Citizen.Wait(1100)return F end;RegisterNetEvent("hpp:get:cops:number")AddEventHandler("hpp:get:cops:number",function()local source=source;local u=APICKF.getUserFromSource(source)if u then local v=u:getCharacter()if v then local w=v.id;if v:hasGroup("pmesp")then table.insert(F,1,source)end end end end)