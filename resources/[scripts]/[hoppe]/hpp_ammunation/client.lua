local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_ammunation")API=b.getInterface('API')cAPI=a.getInterface('cAPI')local d=module("hpp_ammunation","config/cfg")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local e=3000;local f=false;function ToogleAmmuNationMenu(g)SetNuiFocus(g,g)SendNUIMessage({open=g})end;RegisterNUICallback("closeMenu",function()ToogleAmmuNationMenu(false)end)RegisterNUICallback("buyItem",function(h)local i=h.ItemName;local j=h.ItemPrice;local k=c.buyItem(i,j)if k.error then TriggerEvent("Notify","negado",k.reason)else TriggerEvent("Notify","sucesso","Comprou x1 "..k.itemname.."")end end)Citizen.CreateThread(function()while true do Citizen.Wait(e)for l,m in pairs(d.spots)do if l==1 then f=false end;local n=GetPlayerPed(-1)local o,p,q=table.unpack(GetEntityCoords(n))local r,s,t=m[1],m[2],m[3]local u=GetDistanceBetweenCoords(o,p,q,r,s,t,true)if u<10 then f=true;DrawMarker(20,r,s,t,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3Ds(r,s,t+0.3,"AMMU-NATION")if u<1.2 and IsControlJustPressed(0,38)then ToogleAmmuNationMenu(true)end end;if f then e=1 else e=3000 end end end end)function DrawText3Ds(v,w,x,y)local z,A,B=World3dToScreen2d(v,w,x)SetTextFont(4)SetTextScale(0.35,0.35)SetTextColour(255,255,255,150)SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(y)DrawText(A,B)local C=string.len(y)/370;DrawRect(A,B+0.0125,0.01+C,0.03,0,0,0,80)end