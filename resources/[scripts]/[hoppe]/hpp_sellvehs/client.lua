local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_sellvehs")API=b.getInterface('API')cAPI=a.getInterface('cAPI')Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local d={[1]={["x"]=-32.130405426025,["y"]=-1111.6166992188,["z"]=26.422355651855}}function ToogleSellVehMenu(e)if e then PlaySoundFrontend(-1,"Pin_Good","DLC_HEIST_BIOLAB_PREP_HACKING_SOUNDS",1)end;SetNuiFocus(e,e)SendNUIMessage({open=e})end;Citizen.CreateThread(function()SetNuiFocus(false,false)end)RegisterNUICallback("closeMenu",function()PlaySoundFrontend(-1,"Hack_Success","DLC_HEIST_BIOLAB_PREP_HACKING_SOUNDS",1)ToogleSellVehMenu(false)end)RegisterNUICallback("buyVehicle",function(f)local g=c.buyCar(f.vehicle,parseInt(f.price),f.imageUrl,f.stock,f.trunk)if g.error then if g.reason=="Vehicle already exist in garage"then TriggerEvent("Notify","negado","Já existe esse veículo em sua garagem!")end;if g.reason=="Don't have money to buy this car"then TriggerEvent("Notify","negado","Você não tem dinheiro!")end;if g.reason=="Maximum number of cars in the garage"then TriggerEvent("Notify","negado","Número máximo de carros na garagem atingido!")end;if g.reason=="Stock is empty"then TriggerEvent("Notify","negado","O estoque deste carro acabou!")end else TriggerEvent("Notify","sucesso","Você comprou o veículo com sucesso!")end;print(g.reason)end)local h=4000;Citizen.CreateThread(function()while true do Citizen.Wait(h)for i=1,#d do local j=GetPlayerPed(-1)local k,l,m=table.unpack(GetEntityCoords(j))local n,o=GetGroundZFor_3dCoord(d[i].x,d[i].y,d[i].z)local p=GetDistanceBetweenCoords(d[i].x,d[i].y,o,k,l,m,true)if p<20 then h=1;DrawMarker(36,d[i].x,d[i].y,d[i].z,0,0,0,0,0,0,0.4,0.4,0.4,255,150,255,50,1,1,1,1)if p<1.5 then if IsControlJustPressed(0,38)then ToogleSellVehMenu(true)end end else h=4000 end end end end)function newNotify(q,r,s,t)if r~=-1 then SetNotificationBackgroundColor(r)end;SetNotificationTextEntry(q)for u,v in ipairs(s)do AddTextComponentSubstringPlayerName(v)end;DrawNotification(false,false)if t then PlaySoundFrontend(-1,"Menu_Accept","Phone_SoundSet_Default",1)end end;function notify(w)newNotify("STRING",11,{""..w},true)end