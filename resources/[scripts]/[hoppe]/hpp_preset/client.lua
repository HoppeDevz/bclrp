local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_preset")API=b.getInterface('API')cAPI=a.getInterface('cAPI')animApi=module("_core","client/functions/_Anims")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)hppC={}a.bindInterface("hpp_preset",hppC)RegisterNetEvent("hoppe:preset:updateClothes")AddEventHandler("hoppe:preset:updateClothes",function(d,e,f)local ped=GetPlayerPed(-1)for g,h in pairs(d)do if g then if e=="remove"then if h then if g=="p0"then SetPedPropIndex(ped,0,h[1],h[2],2)elseif g=="p1"then elseif g=="p2"then elseif g=="p6"then elseif g=="p7"then else if g then if h[3]then SetPedComponentVariation(ped,parseInt(tonumber(g)),parseInt(h[1]),parseInt(h[2]),parseInt(h[3]))else SetPedComponentVariation(ped,parseInt(tonumber(g)),parseInt(h[1]),parseInt(h[2]),2)end end end end else if parseInt(g)~=2 or g~="2"then if g=="p0"then SetPedPropIndex(ped,0,h[1],h[2],2)else if g=="p1"then SetPedPropIndex(ped,1,h[1],h[2],2)else if g=="p2"then SetPedPropIndex(ped,2,h[1],h[2],2)else if g=="p6"then SetPedPropIndex(ped,6,h[1],h[2],2)else if g=="p7"then SetPedPropIndex(ped,7,h[1],h[2],2)else print("k => ",g,"v[1] => ",h[1])if not h[3]then SetPedComponentVariation(ped,parseInt(g),parseInt(h[1]),parseInt(h[2]),0)end;if h[3]then SetPedComponentVariation(ped,parseInt(g),parseInt(h[1]),parseInt(h[2]),parseInt(h[3]))end end end end end end else print("k == 2")end end end end end)function hppC.getCustomization()local ped=GetPlayerPed(-1)local d={}for i=0,20 do d[i]={GetPedDrawableVariation(ped,i),GetPedTextureVariation(ped,i),GetPedPaletteVariation(ped,i)}end;for i=0,10 do d["p"..i]={GetPedPropIndex(ped,i),math.max(GetPedPropTextureIndex(ped,i),0)}end;return d end;RegisterCommand("chapeu",function(j,k,l)local ped=GetPlayerPed(-1)if k[1]then if tonumber(c.isHaveClothes())==0 then if not c.isVip100()then return TriggerEvent("Notify","negado","Você precisa de roupas!")end end;if not k[2]then animApi.playAnim(true,{{"veh@common@fp_helmet@","put_on_helmet"}},false)Citizen.Wait(1700)SetPedPropIndex(ped,0,parseInt(k[1]),0,2)return else animApi.playAnim(true,{{"veh@common@fp_helmet@","put_on_helmet"}},false)Citizen.Wait(1700)SetPedPropIndex(ped,0,parseInt(k[1]),parseInt(k[2]),2)return end else local m=GetEntityModel(GetPlayerPed(-1))if m==1885233650 or m=="1885233650"then animApi.playAnim(true,{{"veh@common@fp_helmet@","take_off_helmet_stand"}},false)Citizen.Wait(700)SetPedPropIndex(ped,0,8,0,2)return else if m==-1667301416 or m=="-1667301416"then animApi.playAnim(true,{{"veh@common@fp_helmet@","take_off_helmet_stand"}},false)Citizen.Wait(700)SetPedPropIndex(ped,0,57,0,2)return end end end end)RegisterCommand("mascara",function(j,k,l)local ped=GetPlayerPed(-1)if k[1]then if tonumber(c.isHaveClothes())==0 then if not c.isVip100()then return TriggerEvent("Notify","negado","Você precisa de roupas!")end end;if not k[2]then TaskPlayAnim(ped,dict,anim,3.0,3.0,-1,flag,0,0,0,0)SetPedComponentVariation(ped,parseInt(1),parseInt(k[1]),0,2)animApi.playAnim(true,{{"misscommon@std_take_off_masks","take_off_mask_ps"}},false)else TaskPlayAnim(ped,dict,anim,3.0,3.0,-1,flag,0,0,0,0)SetPedComponentVariation(ped,parseInt(1),parseInt(k[1]),parseInt(k[2]),2)animApi.playAnim(true,{{"misscommon@std_take_off_masks","take_off_mask_ps"}},false)end else SetPedComponentVariation(ped,parseInt(1),0,0,2)animApi.playAnim(true,{{"misscommon@std_take_off_masks","take_off_mask_ps"}},false)end end)RegisterCommand("oculos",function(j,k,l)local ped=GetPlayerPed(-1)if k[1]then if tonumber(c.isHaveClothes())==0 then if not c.isVip100()then return TriggerEvent("Notify","negado","Você precisa de roupas!")end end;if not k[2]then animApi.playAnim(true,{{"misscommon@van_put_on_masks","put_on_mask_ps"}},false)Citizen.Wait(700)SetPedPropIndex(ped,1,parseInt(k[1]),0,2)else animApi.playAnim(true,{{"misscommon@van_put_on_masks","put_on_mask_ps"}},false)Citizen.Wait(700)SetPedPropIndex(ped,1,parseInt(k[1]),parseInt(k[2]),2)end else animApi.playAnim(true,{{"misscommon@std_take_off_masks","take_off_mask_ps"}},false)Citizen.Wait(400)SetPedPropIndex(ped,1,0,0,2)end end)RegisterCommand("rchapeu",function(j,k,l)local n=getNearestPlayer(5)if n~=nil and n~=0 then c.removeHat(n)end end)RegisterCommand("rmascara",function(j,k,l)local n=getNearestPlayer(5)if n~=nil and n~=0 then c.removeMask(n)end end)RegisterNetEvent("hoppe:remHat")AddEventHandler("hoppe:remHat",function()local m=GetEntityModel(GetPlayerPed(-1))if m==1885233650 or m=="1885233650"then SetPedPropIndex(ped,0,8,0,2)return end;if m==-1667301416 or m=="-1667301416"then SetPedPropIndex(ped,0,57,0,2)return end end)RegisterNetEvent("hoppe:remMask")AddEventHandler("hoppe:remMask",function()local ped=GetPlayerPed(-1)SetPedComponentVariation(ped,parseInt(1),0,0,2)end)function getNearestPlayer(o)local p={}local ped=GetPlayerPed(-1)local q,r,s=table.unpack(GetEntityCoords(ped))for g,h in pairs(GetActivePlayers())do local t=GetPlayerServerId(h)local u=GetPlayerPed(h)local v,w,x=table.unpack(GetEntityCoords(u))local y=GetDistanceBetweenCoords(v,w,x,q,r,s,true)if y<o then p[t]=y end end;local j=0;local z=o+0.01;for A,B in pairs(p)do if B>0.0 then if B<z then z=B;j=A end end end;return j end;local C={"mood_normal_1","mood_smug_1","mood_stressed_1","mood_drivefast_1","mood_skydive_1","mood_injured_1","mood_angry_1","mood_drunk_1","mood_happy_1","mood_sulk_1","mood_aiming_1","shocked_1","shocked_2","mood_sleeping_1","mood_knockout_1","dead_1","dead_2"}local D=1;RegisterCommand("mood",function(j,k,l)if k[1]then if C[parseInt(k[1])]then SetFacialIdleAnimOverride(GetPlayerPed(-1),C[parseInt(k[1])])end end end)function newNotify(E,F,G,H)if F~=-1 then SetNotificationBackgroundColor(F)end;SetNotificationTextEntry(E)for I,J in ipairs(G)do AddTextComponentSubstringPlayerName(J)end;DrawNotification(false,false)if H then PlaySoundFrontend(-1,"Menu_Accept","Phone_SoundSet_Default",1)end end;function notify(K)newNotify("STRING",11,{""..K},true)end;RegisterNetEvent("preset-notify")AddEventHandler("preset-notify",function(L)notify(L)end)