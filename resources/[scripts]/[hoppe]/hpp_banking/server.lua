local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')APICKF=b.getInterface('API')cAPI=a.getInterface('cAPI')hpp={}a.bindInterface("hpp_banking",hpp)Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)function hpp.getUserId()local c=source;local d=APICKF.getUserFromSource(c)if d then local e=d:getCharacter()if e then return parseInt(e.id)end end end;function hpp.getBillValues()local c=source;local d=APICKF.getUserFromSource(c)if d then local e=d:getCharacter()if e then local f=MySQL.Sync.fetchAll("SELECT * FROM police_bills WHERE charid = @charid",{["@charid"]=e.id})if#f>0 then return f[1].bill_value else return 0 end end end end;function hpp.payBills(g)local c=source;local d=APICKF.getUserFromSource(c)if d then local e=d:getCharacter()if e then MySQL.Sync.fetchAll("UPDATE characters SET money = @money WHERE charid = @charid",{["@money"]=tonumber(g),["@charid"]=e.id})MySQL.Sync.fetchAll("UPDATE police_bills SET bill_value = 0 WHERE charid = @charid",{["@charid"]=e.id})end end end;function hpp.tryDeposit(h)local c=source;local d=APICKF.getUserFromSource(c)local e=d:getCharacter()local i=e:getMoney()local j=parseInt(e.id)local f=MySQL.Sync.fetchAll("SELECT * FROM characters WHERE charid = @charid",{["@charid"]=j})local k=parseInt(f[1].money)local l=k+h;print(h)if parseInt(i)>=h then print(l)MySQL.Sync.fetchAll("UPDATE characters SET money = @money WHERE charid = @charid",{["@money"]=l,["@charid"]=j})e:removeMoney(h)return true else return false end end;function hpp.tryWithdraw(h)local c=source;local d=APICKF.getUserFromSource(c)local e=d:getCharacter()local j=parseInt(e.id)local f=MySQL.Sync.fetchAll("SELECT * FROM characters WHERE charid = @charid",{["@charid"]=j})if f[1].money>=parseInt(h)then MySQL.Sync.fetchAll("UPDATE characters SET money = @money WHERE charid = @charid",{["@money"]=f[1].money-parseInt(h),["@charid"]=j})e:addMoney(parseInt(h))return true else return false end end;function hpp.getMoneyUser()local c=source;local d=APICKF.getUserFromSource(c)local e=d:getCharacter()local j=parseInt(e.id)local f=MySQL.Sync.fetchAll("SELECT * FROM characters WHERE charid = @charid",{["@charid"]=j})return f[1].money end