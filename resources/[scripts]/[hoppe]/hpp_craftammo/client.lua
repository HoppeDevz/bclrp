local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_craftammo")API=b.getInterface('API')cAPI=a.getInterface('cAPI')local d=module("hpp_craftammo","config/cfg")animApi=module("_core","client/functions/_Anims")local e={"mureta","mafia"}Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)function ToogleCraftAmmoMenu(f)SetNuiFocus(f,f)if f then SendNUIMessage({open=f,crafts=d.crafts})else SendNUIMessage({open=f})end end;RegisterNUICallback("closeMenu",function()ToogleCraftAmmoMenu(false)end)RegisterNUICallback("craftAmmo",function(g)local h=g._AmmoName;local i=tonumber(g._AmmoPrice)c.tryCraftAmmo(h,i)end)local j={}local k=3000;Citizen.CreateThread(function()while true do for l,m in pairs(d.craftspots)do local n=GetPlayerPed(-1)local o,p,q=table.unpack(GetEntityCoords(n))local r,s,t=m[1],m[2],m[3]local u=GetDistanceBetweenCoords(o,p,q,r,s,t,true)if u<20 then if#j>0 then for v,w in pairs(j)do if w[1]==m[1]then else table.insert(j,1,{m[1],m[2],m[3]})end end else table.insert(j,1,{m[1],m[2],m[3]})end else for x=1,#j do if j[x][1]==m[1]then table.remove(j,x)end end end end;Citizen.Wait(k)end end)local y=3000;Citizen.CreateThread(function()while true do for z=1,#j do local n=GetPlayerPed(-1)local A,B,C=table.unpack(GetEntityCoords(n))local r,s,t=j[z][1],j[z][2],j[z][3]local u=GetDistanceBetweenCoords(A,B,C,r,s,t)if u<20 then y=1;DrawMarker(2,r,s,t,0,0,0,0,0,0,0.3,0.3,0.3,255,255,0,30,1,1,1,1)if u<1.5 and IsControlJustPressed(0,38)then local D=false;for E=1,#e do if c.hasGroup(e[E])then D=true end end;if D then ToogleCraftAmmoMenu(true)else TriggerEvent("Notify","negado","Você não tem permissão!")break end end else y=3000 end end;Citizen.Wait(y)end end)