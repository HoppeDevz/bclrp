local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_moneywash")API=b.getInterface('API')cAPI=a.getInterface('cAPI')hppC={}a.bindInterface("hpp_moneywash",hppC)local d=module("hpp_moneywash","config/moneywash")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)function ToogleMoneyWashMenu(e,f)if e then PlaySoundFrontend(-1,"TOGGLE_ON","HUD_FRONTEND_DEFAULT_SOUNDSET",1)end;SetNuiFocus(e,e)if e then SendNUIMessage({open=e,percent=f})else SendNUIMessage({open=e})end end;RegisterNUICallback("washMoney",function(g)local h=parseInt(g)local i=c.washMoney(h)if i then TriggerEvent("Notify","sucesso","Você lavou R$"..g)else TriggerEvent("Notify","negado","Você não tem essa quantia de dinheiro sujo!")end end)RegisterNUICallback("closeButton",function()PlaySoundFrontend(-1,"QUIT","HUD_FRONTEND_DEFAULT_SOUNDSET",1)ToogleMoneyWashMenu(false)end)local j=4000;Citizen.CreateThread(function()while true do Citizen.Wait(j)for k,l in pairs(d.spots)do local m=GetPlayerPed(-1)local n,o,p=table.unpack(GetEntityCoords(m))local q,r=GetGroundZFor_3dCoord(l.x,l.y,l.z)local s=GetDistanceBetweenCoords(l.x,l.y,r,n,o,p,true)if s<20 then j=1;DrawMarker(20,l.x,l.y,l.z,0,0,0,0,0,0,1.0,1.0,1.0,0,150,150,50,1,1,1,1)DrawText3D(l.x,l.y,l.z+0.6,"LAVANDERIA",1.0,4,100)if s<1.5 then drawTxt("APERTE ~r~E~w~ PARA ABRIR A LAVANDERIA",4,0.5,0.91,0.36,255,255,255,200)if IsControlJustPressed(0,38)then ToogleMoneyWashMenu(true,l.percent)end end else j=4000 end end end end)function newNotify(t,u,v,w)if u~=-1 then SetNotificationBackgroundColor(u)end;SetNotificationTextEntry(t)for x,y in ipairs(v)do AddTextComponentSubstringPlayerName(y)end;DrawNotification(false,false)if w then PlaySoundFrontend(-1,"Menu_Accept","Phone_SoundSet_Default",1)end end;function notify(z)newNotify("STRING",11,{""..z},true)end;function DrawText3D(n,o,p,A,B,C,D)local E,F,G=World3dToScreen2d(n,o,p)local H,I,J=table.unpack(GetGameplayCamCoords())local K=GetDistanceBetweenCoords(H,I,J,n,o,p,1)local L=1/K*B;local M=1/GetGameplayCamFov()*100;local L=L*M;if E then SetTextScale(0.0*L,1.1*L)SetTextFont(C)SetTextProportional(1)SetTextColour(255,255,255,D)SetTextDropshadow(0,0,0,0,255)SetTextEdge(2,0,0,0,150)SetTextDropShadow()SetTextOutline()SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(A)DrawText(F,G)end end;function drawTxt(A,C,n,o,L,N,O,P,Q)SetTextFont(C)SetTextScale(L,L)SetTextColour(N,O,P,Q)SetTextOutline()SetTextCentre(1)SetTextEntry("STRING")AddTextComponentString(A)DrawText(n,o)end