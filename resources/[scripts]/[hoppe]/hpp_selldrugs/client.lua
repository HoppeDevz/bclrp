local a=module('_core','libs/Tunnel')local b=module('_core','libs/Proxy')local c=a.getInterface("hpp_selldrugs")hppC={}a.bindInterface("hpp_selldrugs",hppC)API=b.getInterface('API')cAPI=a.getInterface('cAPI')animApi=module("_core","client/functions/_Anims")Citizen.CreateThread(function()while true do Citizen.Wait(5*60*1000)collectgarbage("count")collectgarbage("collect")end end)local d=module("hpp_selldrugs","config/cfg")local e=false;local f=0;local g=0;local h;local i=3000;local j=false;Citizen.CreateThread(function()while true do Citizen.Wait(i)for k,l in pairs(d.start)do if k==1 then j=false end;local m=GetPlayerPed(-1)local n,o,p=table.unpack(GetEntityCoords(m))local q,r,s=l[1],l[2],l[3]local t,u=GetGroundZFor_3dCoord(q,r,s)local v=GetDistanceBetweenCoords(q,r,u,n,o,p,true)if not e and v<20 then j=true;DrawMarker(20,q,r,s,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(q,r,s+0.6,"VENDER DROGAS",1.0,4,100)if IsControlJustPressed(0,38)then g=math.random(2,10)f=math.random(1,#d.routes)e=true;addServiceBlip(d.routes[f][1],d.routes[f][2],d.routes[f][3])end end end;if j then i=1 else i=3000 end end end)local w=3000;Citizen.CreateThread(function()while true do if e then local m=GetPlayerPed(-1)local n,o,p=table.unpack(GetEntityCoords(m))local q,r,s=d.routes[f][1],d.routes[f][2],d.routes[f][3]local t,u=GetGroundZFor_3dCoord(q,r,s)local v=GetDistanceBetweenCoords(q,r,u,n,o,p,true)if v<20 then w=1;DrawMarker(20,q,r,s,0,0,0,0,0,0,0.5,0.5,0.5,0,150,150,50,1,1,1,1)DrawText3D(q,r,s+0.6,"ENTREGAR DROGAS",1.0,4,100)if v<1.5 then if IsControlJustPressed(0,38)then local x=c.checkDelivery(g)if not x.error then if f==#d.routes then f=math.random(1,#d.routes)g=math.random(2,10)removeServiceBlip()TriggerEvent("Notify","sucesso","Você ganhou R$"..x.money_award.." de dinheiro sujo!")addServiceBlip(d.routes[f][1],d.routes[f][2],d.routes[f][3])else f=math.random(1,#d.routes)g=math.random(2,10)removeServiceBlip()TriggerEvent("Notify","sucesso","Você ganhou R$"..x.money_award.." de dinheiro sujo!")addServiceBlip(d.routes[f][1],d.routes[f][2],d.routes[f][3])end else TriggerEvent("Notify","negado","Você não tem "..g.." drogas!")end end end else w=3000 end else w=3000 end;Citizen.Wait(w)end end)local y;Citizen.CreateThread(function()while true do if e then y=1;if IsControlJustPressed(0,168)then e=false;f=0;g=0;removeServiceBlip()h=nil end else y=3000 end;Citizen.Wait(y)end end)function newNotify(z,A,B,C)if A~=-1 then SetNotificationBackgroundColor(A)end;SetNotificationTextEntry(z)for D,E in ipairs(B)do AddTextComponentSubstringPlayerName(E)end;DrawNotification(false,false)if C then PlaySoundFrontend(-1,"Menu_Accept","Phone_SoundSet_Default",1)end end;function notify(F)newNotify("STRING",11,{""..F},true)end;function addServiceBlip(G,H,I)local n,o,p=G,H,I;h=AddBlipForCoord(n,o,p)SetBlipRoute(h,true)end;function removeServiceBlip()RemoveBlip(h)end;function DrawText3D(n,o,p,J,K,L,M)local N,G,H=World3dToScreen2d(n,o,p)local O,P,Q=table.unpack(GetGameplayCamCoords())local R=GetDistanceBetweenCoords(O,P,Q,n,o,p,1)local S=1/R*K;local T=1/GetGameplayCamFov()*100;local S=S*T;if N then SetTextScale(0.0*S,1.1*S)SetTextFont(L)SetTextProportional(1)SetTextColour(255,255,255,M)SetTextDropshadow(0,0,0,0,255)SetTextEdge(2,0,0,0,150)SetTextDropShadow()SetTextOutline()SetTextEntry("STRING")SetTextCentre(1)AddTextComponentString(J)DrawText(G,H)end end